# Pings a list of IPs and outputs a timestamped file with servers up and servers down.

$server_dict = [ordered]@{
	hostname1='192.168.1.2';
	hostname2='192.168.1.3';
	hostname3='192.168.1.4';
	hostname4='192.168.1.5';
	hostname5='192.168.1.6';
	hostname6='192.168.1.7';
	hostname7='192.168.1.8';
	hostname8='192.168.1.9';
	hostname9='192.168.1.10';
	hostname10='192.168.1.11';
	hostname11='192.168.1.12';
	hostname12='192.168.1.13';
	hostname13='192.168.1.14';
	hostname14='192.168.1.15';
	hostname15='192.168.1.16';
	hostname16='192.168.1.17';
	hostname17='192.168.1.18';
	hostname18='192.168.1.19';
	hostname19='192.168.1.20';
	hostname20='192.168.1.21';
	hostname21='192.168.1.22';
	hostname22='192.168.1.23';
	hostname23='192.168.1.24';
	hostname24='192.168.1.25';
	hostname25='192.168.1.26';
	hostname26='192.168.1.27';
	hostname27='192.168.1.28';
	hostname28='192.168.1.29';
	hostname29='192.168.1.30';
	hostname30='192.168.1.31';
	hostname31='192.168.1.32';
	hostname32='192.168.1.33';
	hostname33='192.168.1.34';
	hostname34='192.168.1.35';
	hostname35='192.168.1.36';
	hostname36='192.168.1.37';
	hostname37='192.168.1.38';
	hostname38='192.168.1.39';
	hostname39='192.168.1.40';
	hostname40='192.168.1.41';
	hostname41='192.168.1.42';
	hostname42='192.168.1.43';
	hostname43='192.168.1.44';
	hostname44='192.168.1.45';
	hostname45='192.168.1.46';
	hostname46='192.168.1.47';
	hostname47='192.168.1.48';
	hostname48='192.168.1.49';
	hostname49='192.168.1.50';
	hostname50='192.168.1.51';
	hostname51='192.168.1.52';
	hostname52='192.168.1.53';
	hostname53='192.168.1.54';
	hostname54='192.168.1.55';
	hostname55='192.168.1.56';
	hostname56='192.168.1.57';
	hostname57='192.168.1.58';
	hostname58='192.168.1.59';
	hostname59='192.168.1.60';
	hostname60='192.168.1.61';
	hostname61='192.168.1.62';
	hostname62='192.168.1.63';
	hostname63='192.168.1.64';
	hostname64='192.168.1.65';
	hostname65='192.168.1.66';
	hostname66='192.168.1.67';
	hostname67='192.168.1.68';
	hostname68='192.168.1.69';
	hostname69='192.168.1.70';
	hostname70='192.168.1.71';
	hostname71='192.168.1.72';
	hostname72='192.168.1.73';
	hostname73='192.168.1.74';
	hostname74='192.168.1.75';
	hostname75='192.168.1.76';
	hostname76='192.168.1.77';
	hostname77='192.168.1.78';
	hostname78='192.168.1.79';
	hostname79='192.168.1.80';
	hostname80='192.168.1.81';
	hostname81='192.168.1.82';
	hostname82='192.168.1.83';
	hostname83='192.168.1.84';
	hostname84='192.168.1.85';
	hostname85='192.168.1.86';
	hostname86='192.168.1.87';
	hostname87='192.168.1.88';
	hostname88='192.168.1.89';
	hostname89='192.168.1.90';
	hostname90='192.168.1.91';
	hostname91='192.168.1.92';
	hostname92='192.168.1.93';
	hostname93='192.168.1.94';
	hostname94='192.168.1.95';
	hostname95='192.168.1.96';
	hostname96='192.168.1.97';
	hostname97='192.168.1.98';
	hostname98='192.168.1.99';
	hostname99='192.168.1.100';
	hostname100='192.168.1.101';
	hostname101='192.168.1.102';
	hostname102='192.168.1.103';
	hostname103='192.168.1.104';
	hostname104='192.168.1.105';
	hostname105='192.168.1.106';
	hostname106='192.168.1.107';
	hostname107='192.168.1.108';
	hostname108='192.168.1.109';
	hostname109='192.168.1.110';
	hostname110='192.168.1.111';
	hostname111='192.168.1.112';
	hostname112='192.168.1.113';
	hostname113='192.168.1.114';
	hostname114='192.168.1.115';
	hostname115='192.168.1.116';
	hostname116='192.168.1.117';
	hostname117='192.168.1.118';
	hostname118='192.168.1.119';
	hostname119='192.168.1.120';
	hostname120='192.168.1.121';
	hostname121='192.168.1.122';
	hostname122='192.168.1.123';
	hostname123='192.168.1.124';
	hostname124='192.168.1.125';
	hostname125='192.168.1.126';
	hostname126='192.168.1.127';
	hostname127='192.168.1.128';
	hostname128='192.168.1.129';
	hostname129='192.168.1.130';
	hostname130='192.168.1.131';
	hostname131='192.168.1.132';
	hostname132='192.168.1.133';
	hostname133='192.168.1.134';
	hostname134='192.168.1.135';
	hostname135='192.168.1.136';
	hostname136='192.168.1.137';
	hostname137='192.168.1.138';
	hostname138='192.168.1.139';
	hostname139='192.168.1.140';
	hostname140='192.168.1.141';
	hostname141='192.168.1.142';
	hostname142='192.168.1.143';
	hostname143='192.168.1.144';
	hostname144='192.168.1.145';
	hostname145='192.168.1.146';
	hostname146='192.168.1.147';
	hostname147='192.168.1.148';
	hostname148='192.168.1.149';
	hostname149='192.168.1.150';
	hostname150='192.168.1.151';
	hostname151='192.168.1.152';
	hostname152='192.168.1.153';
	hostname153='192.168.1.154';
	hostname154='192.168.1.155';
	hostname155='192.168.1.156';
	hostname156='192.168.1.157';
	hostname157='192.168.1.158';
	hostname158='192.168.1.159';
	hostname159='192.168.1.160';
	hostname160='192.168.1.161';
	hostname161='192.168.1.162';
	hostname162='192.168.1.163';
	hostname163='192.168.1.164';
	hostname164='192.168.1.165';
	hostname165='192.168.1.166';
	hostname166='192.168.1.167';
	hostname167='192.168.1.168';
	hostname168='192.168.1.169';
	hostname169='192.168.1.170';
	hostname170='192.168.1.171';
	hostname171='192.168.1.172';
	hostname172='192.168.1.173';
	hostname173='192.168.1.174';
	hostname174='192.168.1.175';
	hostname175='192.168.1.176';
	hostname176='192.168.1.177';
	hostname177='192.168.1.178';
	hostname178='192.168.1.179';
	hostname179='192.168.1.180';
	hostname180='192.168.1.181';
	hostname181='192.168.1.182';
	hostname182='192.168.1.183';
	hostname183='192.168.1.184';
	hostname184='192.168.1.185';
	hostname185='192.168.1.186';
	hostname186='192.168.1.187';
	hostname187='192.168.1.188';
	hostname188='192.168.1.189';
	hostname189='192.168.1.190';
	hostname190='192.168.1.191';
	hostname191='192.168.1.192';
	hostname192='192.168.1.193';
	hostname193='192.168.1.194';
	hostname194='192.168.1.195';
	hostname195='192.168.1.196';
	hostname196='192.168.1.197';
	hostname197='192.168.1.198';
	hostname198='192.168.1.199';
	hostname199='192.168.1.200';
	hostname200='192.168.1.201';
	hostname201='192.168.1.202';
	hostname202='192.168.1.203';
	hostname203='192.168.1.204';
	hostname204='192.168.1.205';
	hostname205='192.168.1.206';
	hostname206='192.168.1.207';
	hostname207='192.168.1.208';
	hostname208='192.168.1.209';
	hostname209='192.168.1.210';
	hostname210='192.168.1.211';
	hostname211='192.168.1.212';
	hostname212='192.168.1.213';
	hostname213='192.168.1.214';
	hostname214='192.168.1.215';
	hostname215='192.168.1.216';
	hostname216='192.168.1.217';
	hostname217='192.168.1.218';
	hostname218='192.168.1.219';
	hostname219='192.168.1.220';
	hostname220='192.168.1.221';
	hostname221='192.168.1.222';
	hostname222='192.168.1.223';
	hostname223='192.168.1.224';
	hostname224='192.168.1.225';
	hostname225='192.168.1.226';
	hostname226='192.168.1.227';
	hostname227='192.168.1.228';
	hostname228='192.168.1.229';
	hostname229='192.168.1.230';
	hostname230='192.168.1.231';
	hostname231='192.168.1.232';
	hostname232='192.168.1.233';
	hostname233='192.168.1.234';
	hostname234='192.168.1.235';
	hostname235='192.168.1.236';
	hostname236='192.168.1.237';
	hostname237='192.168.1.238';
	hostname238='192.168.1.239';
	hostname239='192.168.1.240';
	hostname240='192.168.1.241';
	hostname241='192.168.1.242';
	hostname242='192.168.1.243';
	hostname243='192.168.1.244';
	hostname244='192.168.1.245';
	hostname245='192.168.1.246';
	hostname246='192.168.1.247';
	hostname247='192.168.1.248';
	hostname248='192.168.1.249';
	hostname249='192.168.1.250';
	hostname250='192.168.1.251';
	hostname251='192.168.1.252';
	hostname252='192.168.1.253';
	hostname253='192.168.1.254';
}

$servers_up = [Ordered]@{}
$servers_down = [Ordered]@{}

foreach ($server in $server_dict.GetEnumerator()){
	$hostname = $server.Name
	$ip = $server.Value
	if (Test-NetConnection -ComputerName $ip -InformationLevel Quiet){
		$servers_up += @{$hostname=$ip}
	}
	else{
		$servers_down += @{$hostname=$ip}
	}
}

[string]$timestamp = Get-Date -Format "MM-dd-HH-mm"
$filename = ".\$timestamp-ping-status.txt"

echo "Servers UP:" | Out-File -Append -FilePath $filename
foreach ($server in $servers_up.GetEnumerator()){
	$hostname = $server.Name
	$ip = $server.Value
	echo "$hostname at $ip" | Out-File -Append -FilePath $filename
	} 
	
echo "Servers DOWN:" | Out-File -Append -FilePath $filename
foreach ($server in $servers_down.GetEnumerator()){
	$hostname = $server.Name
	$ip = $server.Value
	echo "$hostname at $ip" | Out-File -Append -FilePath $filename
	}
	